import{v as M,t as $,G as F,d as Y,c as w,a as A,o as B,b as G,i as x,e as L,f as X,F as I,g as J,r as T}from"./vendor.9dc1279d.js";const q=function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))v(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const u of i.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&v(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function v(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};q();function z(e={}){const{immediate:l=!1,onNeedRefresh:n,onOfflineReady:v,onRegistered:o,onRegisterError:i}=e;let u;const h=async(y=!0)=>{};return"serviceWorker"in navigator&&(u=new M("/typelines/sw.js",{scope:"/typelines/"}),u.addEventListener("activated",y=>{y.isUpdate?window.location.reload():v==null||v()}),u.register({immediate:l}).then(y=>{o==null||o(y)}).catch(y=>{i==null||i(y)})),h}const k=[[240,163,255],[0,117,220],[153,63,0],[76,0,92],[25,25,25],[0,92,49],[43,206,72],[255,204,153],[128,128,128],[143,124,0],[157,204,0],[194,0,136],[0,51,128],[255,164,5],[255,168,187],[66,102,0],[255,0,16],[0,153,143],[116,10,255],[153,0,0],[255,80,5]],H=$("<div></div>"),K=$('<div><textarea autocorrect="off" autocapitalize="none"></textarea></div>'),U=$("<div>&nbsp;</div>"),D=new F;function S(e,l){return(()=>{const n=H.cloneNode(!0);return n.style.setProperty("position","absolute"),n.style.setProperty("white-space","pre"),n.style.setProperty("color",l),x(n,e),n})()}const R=320,W=320;function Q(e){let l=0;for(let n=0;n<e.length;n++)l=(l<<5)-l+e.charCodeAt(n)|0;return Math.abs(l)}const V=()=>{let e,l,[n,v]=w(20),[o,i]=w(W/2-10),[u,h]=w(n()),[y,_]=w(o()),m;const g=A({}),E=()=>{for(const r of Object.keys(g))delete g[r]};B(()=>{l.value=" ",l.focus(),m=new WebSocket("wss://tl-server.shuttleapp.rs/ws"),m.addEventListener("message",r=>{const{message:t,id:d}=JSON.parse(r.data);t?t.l?j(d,t.l,t.x,t.y):N(d,t.x,t.y):delete g[d]}),m.addEventListener("close",E)});function N(r,t,d){let p=g[r];if(p)return p.x=t,p.y=d,p;const a=`rgb(${k[Q(r)%k.length].join(",")})`;return g[r]={x:t,y:d,color:a}}function b(r){m.send(JSON.stringify({message:{l:r,x:u(),y:y()}}))}G(()=>{m.removeEventListener("close",E),m.close()});function j(r,t,d,p){const a=N(r,d,p),s=S(t,a.color);e.appendChild(s),s.style.bottom=p+"px",s.style.left=d-s.clientWidth+"px",J({targets:s,duration:3e3,translateY:-20}).finished.then(()=>e.removeChild(s))}function O(){_(Math.max(y()-15,0))}return(()=>{const r=K.cloneNode(!0),t=r.firstChild,d=e;typeof d=="function"?d(r):e=r,r.style.setProperty("position","relative"),r.style.setProperty("overflow","hidden"),r.style.setProperty("width","320px"),r.style.setProperty("height","320px"),r.style.setProperty("background","white"),x(r,L(I,{get each(){return Object.values(g)},children:a=>(()=>{const s=U.cloneNode(!0);return s.style.setProperty("position","absolute"),X(c=>{const f=a.y+"px",P=a.x+"px",C=a.color;return f!==c._v$&&s.style.setProperty("bottom",c._v$=f),P!==c._v$2&&s.style.setProperty("left",c._v$2=P),C!==c._v$3&&s.style.setProperty("background",c._v$3=C),c},{_v$:void 0,_v$2:void 0,_v$3:void 0}),s})()}),t),t.$$input=a=>{const s=a.currentTarget.value;if(a.currentTarget.value=" ",!s){u()===n()?_(o()):h(n()),b("");return}if(s.includes(`
`)){h(n()),O(),b("");return}D.splitGraphemes(s.slice(1)).forEach(c=>{const f=S(c);e.appendChild(f);const P=u()+f.clientWidth;P+10<R?h(P):(h(n()),O()),e.removeChild(f),b(c)})},t.$$click=a=>{const s=e.getBoundingClientRect(),c=s.bottom-a.clientY,f=a.clientX-s.left;c<0||c>W-35||f<0||f>R-10||(i(c),v(f),h(f),_(c),b(""))};const p=l;return typeof p=="function"?p(t):l=t,t.style.setProperty("opacity","0"),t.style.setProperty("position","absolute"),t.style.setProperty("top","0"),t.style.setProperty("left","0"),t.style.setProperty("width","100%"),t.style.setProperty("height","100%"),r})()};Y(["click","input"]);const Z=$("<div></div>"),ee=()=>(()=>{const e=Z.cloneNode(!0);return e.style.setProperty("background","gray"),e.style.setProperty("display","flex"),e.style.setProperty("justify-content","center"),e.style.setProperty("height","100%"),e.style.setProperty("position","relative"),e.style.setProperty("overflow","hidden"),e.style.setProperty("flex-wrap","wrap"),e.style.setProperty("gap","10px"),x(e,L(V,{})),e})();T(()=>L(ee,{}),document.getElementById("root"));z({onNeedRefresh:()=>location.reload()});
