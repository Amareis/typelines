import{t as h,G as k,d as O,c as g,o as E,a as S,b as Y,i as _,e as B,r as G,f as w}from"./vendor.7f98fb5d.js";const M=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))d(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const p of n.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&d(p)}).observe(document,{childList:!0,subtree:!0});function f(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerpolicy&&(n.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?n.credentials="include":r.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(r){if(r.ep)return;r.ep=!0;const n=f(r);fetch(r.href,n)}};M();const W=h("<div></div>"),X=h("<div><div>&nbsp;</div></div>"),j=h('<textarea autocorrect="off" autocapitalize="none"></textarea>'),A=new k;function x(l){return(()=>{const t=W.cloneNode(!0);return t.style.setProperty("position","absolute"),t.style.setProperty("white-space","pre"),_(t,l),t})()}const C=320,L=320,F=()=>{let l,t,f,[d,r]=g(20),[n,p]=g(L/2-10),[m,u]=g(d()),[P,$]=g(n()),v;E(()=>{f.value=" ",f.focus(),v=new WebSocket("wss://worker.terma95.workers.dev/api/ws"),v.addEventListener("message",e=>{const o=JSON.parse(e.data).message;N(o.l,o.x,o.y)})}),S(()=>{v.close(),console.log("clear!")});function N(e,o,a){const s=x(e);s.style.bottom=a+"px",s.style.left=o+"px",l.appendChild(s),B({targets:s,duration:3e3,translateY:-20}).finished.then(()=>l.removeChild(s))}function b(){$(Math.max(P()-t.clientHeight,0))}return[(()=>{const e=X.cloneNode(!0),o=e.firstChild,a=l;typeof a=="function"?a(e):l=e,e.style.setProperty("position","relative"),e.style.setProperty("overflow","hidden"),e.style.setProperty("width","320px"),e.style.setProperty("height","320px"),e.style.setProperty("background","white");const s=t;return typeof s=="function"?s(o):t=o,o.style.setProperty("position","absolute"),o.style.setProperty("background","red"),Y(i=>{const c=P()+"px",y=m()+"px";return c!==i._v$&&o.style.setProperty("bottom",i._v$=c),y!==i._v$2&&o.style.setProperty("left",i._v$2=y),i},{_v$:void 0,_v$2:void 0}),e})(),(()=>{const e=j.cloneNode(!0);e.$$input=a=>{const s=a.currentTarget.value;if(a.currentTarget.value=" ",!s){m()===d()?$(n()):u(d());return}if(s.includes(`
`)){u(d()),b();return}A.splitGraphemes(s.slice(1)).forEach(i=>{v.send(JSON.stringify({message:{l:i,x:m(),y:P()}}));const c=x(i);l.appendChild(c);const y=m()+c.clientWidth;l.removeChild(c),y+10<C?u(y):(u(d()),b())})},e.$$click=a=>{const s=l.getBoundingClientRect(),i=s.bottom-a.clientY,c=a.clientX-s.left;i<0||i>L-35||c<0||c>C-10||(p(i),r(c),u(c),$(i))};const o=f;return typeof o=="function"?o(e):f=e,e.style.setProperty("opacity","0"),e.style.setProperty("position","absolute"),e.style.setProperty("top","-100px"),e.style.setProperty("left","0"),e.style.setProperty("width","100%"),e.style.setProperty("height","300%"),e})()]};O(["click","input"]);const H=h('<div><div id="log"></div></div>'),I=()=>{let l;return(()=>{const t=H.cloneNode(!0);t.firstChild;const f=l;return typeof f=="function"?f(t):l=t,t.style.setProperty("background","gray"),t.style.setProperty("display","flex"),t.style.setProperty("justify-content","center"),t.style.setProperty("height","100%"),t.style.setProperty("position","relative"),t.style.setProperty("overflow","hidden"),_(t,w(F,{}),null),t})()};G(()=>w(I,{}),document.getElementById("root"));
